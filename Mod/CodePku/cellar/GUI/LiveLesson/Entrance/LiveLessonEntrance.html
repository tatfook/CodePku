<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>加入房间</title>
</head>
<body>
    <pe:mcml>
<script refresh="false" type="text/npl" src=""><![CDATA[
local LiveLessonEntrance = NPL.load("(gl)Mod/CodePku/cellar/GUI/LiveLesson/Entrance/LiveLessonEntrance.lua")

-- 获取图标
function GetIcon(index)
    return LiveLessonEntrance:GetIconPath(index)
end

function Close()
    LiveLessonEntrance:EntrancePageSpecialClose()
end

-- todo加入房间
function JoinRoom()
    GameLogic.AddBBS("CodeGlobals", L"加入房间", 3000, "#FF0000");
end

-- 创建房间
function ShowEstablishRoomPage()
    LiveLessonEntrance:EntrancePageSpecialClose()
    LiveLessonEntrance:ShowEstablishPage()
end

-- onchange
function ChangeCode()
    local code = Page:GetValue("matchingcode")
    if commonlib.utf8.len(code) > LiveLessonEntrance.constant.MatchCodeLimit then
        code = string.sub(code, 1, LiveLessonEntrance.constant.MatchCodeLimit)
    end
    Page:SetValue("matchingcode", code)
end

]]>
</script>
<pe:container alignment="_lt" width="704" height="528" style="">
    <div style="position: relative; width: 704; height: 528;">
        <!-- 背景 -->
        <div style="<%=format('position: relative; left: 29; top: 38; width: 666;height: 470;background:url(%s);', GetIcon('live_lesson_comm.png'))%>">
            <div style="position: relative;left: 31;top: 195;width: 290;height: 55;font-family: zkklt;font-size: 48;color: #7e2f12;">输入匹配码：</div>
            <!-- 输入框 -->
            <div style="<%=format('position: relative; left: 299; top: 188; width: 316;height: 65;background:url(%s);', GetIcon('live_lesson_comm_frame.png'))%>">
                <input type="text" onchange="ChangeCode" MoveViewWhenAttachWithIME="true" value="" name="matchingcode" EmptyText='' style="position: relative;left: 15;top: 3; width: 290; height: 60; font-family: zkklt;font-size: 48;line-height: 60;color: #ffffff;background: #000000;"/>
            </div>
        </div>
        <!-- 飘带 -->
        <div style="<%=format('position: relative; left: 34; top: 24; width: 337;height: 106;background:url(%s);', GetIcon('live_lesson_cion01.png'))%>">
            <div style="position: relative;left: 65;top: 21;font-family: zkklt;font-size: 48;color: #ffffff;">加入房间</div>
        </div>
        <!-- 回形针 -->
        <div style="<%=format('position: relative; left: 0; top: 0; width: 103;height: 113;background:url(%s);', GetIcon('live_lesson_cion_pin.png'))%>"></div>
        <!-- 关闭 -->
        <div onclick="Close" style="<%=format('position: relative; left: 580; top: 27; width: 77;height: 123;background:url(%s);', GetIcon('live_lesson_comm_x.png'))%>"></div>
        <!-- 功能按钮-老师 -->
        <pe:if condition='<%= System.User.info.is_employee == 1 %>'>
            <!-- 创建房间 -->
            <div onclick="ShowEstablishRoomPage" style="<%=format('position: relative; left: 98; top: 461; width: 198;height: 67;background:url(%s);', GetIcon('live_lesson_btn_blue_big.png'))%>">
                <div style="<%=format('position: relative; left: 19; top: 10; width: 159;height: 39;background:url(%s);', GetIcon('live_lesson_chuangjian.png'))%>"></div>
            </div>
            <!-- 进入房间 -->
            <div onclick="JoinRoom" style="<%=format('position: relative; left: 411; top: 461; width: 198;height: 67;background:url(%s);', GetIcon('live_lesson_cion_return01.png'))%>">
                <div style="<%=format('position: relative; left: 19; top: 10; width: 159;height: 39;background:url(%s);', GetIcon('live_lesson_icon_enter_into03.png'))%>"></div>
            </div>
        </pe:if>
        <!-- 功能按钮-学生 -->
        <pe:if condition='<%= System.User.info.is_employee ~= 1 %>'>
            <!-- 进入房间 -->
            <div onclick="JoinRoom" style="<%=format('position: relative; left: 255; top: 461; width: 198;height: 67;background:url(%s);', GetIcon('live_lesson_cion_return01.png'))%>">
                <div style="<%=format('position: relative; left: 19; top: 10; width: 159;height: 39;background:url(%s);', GetIcon('live_lesson_icon_enter_into03.png'))%>"></div>
            </div>
        </pe:if>
    </div>
</pe:container>
</pe:mcml>
</body>
</html>
  
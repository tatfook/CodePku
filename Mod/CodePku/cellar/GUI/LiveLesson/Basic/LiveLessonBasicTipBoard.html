<!-- "Mod/CodePku/cellar/Common/TouchMiniButtons/MainUIButtons_common.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>

<body>
<pe:mcml>
<script refresh="false" type="text/npl" src="LiveLessonBasic.lua"><![CDATA[
NPL.load("(gl)Mod/CodePku/cellar/GUI/LiveLesson/Basic/LiveLessonBasic.lua")
LiveLessonBasic = commonlib.gettable("Mod.CodePku.Common.LiveLessonBasic")

function GetIcon(index)
    return LiveLessonBasic:GetIconPath(index)
end

function GetStudents()
    return LiveLessonBasic:GetStudents()
end

function GetWorldInfo()
    return LiveLessonBasic:GetWorldInfo()
end

function OnClickGrouping()
    OnClose()
    LiveLessonBasic:Grouping()
end

function OnClickCopyMatchCode()
    LiveLessonBasic:CopyMatchCode()
end

function OnConfirm()
    OnClose()
    LiveLessonBasic:AddStudentToGroup()
end

function GetNumToGroup(num)
    local a = string.byte("A")
    return string.char(a+num-1)
end

function GetAddGroupTip()
    local index = LiveLessonBasic:GetStudentIndexByUserId(LiveLessonBasic.AddStudentToGroup_userid)
    if index then
        local name = GetStudents()[index]["name"]
        local group = GetNumToGroup(LiveLessonBasic.AddStudentToGroup_group)
        return {
            name = name,
            group = group,
        }
    end
end

function OnClose()
    Page:CloseWindow()
    if LiveLessonBasic.tipBoardFlag == 'grouping' then
        LiveLessonBasic.windowGroup = nil
    elseif LiveLessonBasic.tipBoardFlag == 'roominfo' then
        LiveLessonBasic.windowWorldInfo = nil
    elseif LiveLessonBasic.tipBoardFlag == 'confirm' then
        LiveLessonBasic.windowConfirm = nil
    end
end
]]></script>
<style type="text/mcss">

</style>
<pe:container alignment="_lt" width="100%" height="100%">
    <div style="width: 1920; height: 1080; text-align: center; font-size: 36; font-family: zkklt;">
        <div style='<%= string.format("position: relative; left: 510; top: 248; width: 895; height: 389; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_comm_bot.png"))%>'>
            <pe:if condition="<%= LiveLessonBasic.tipBoardFlag == 'grouping' %>">
                <div style="position: relative; left: 0; top: 28; width: 895; color: #ffffff; font-size: 36;">分&nbsp;组</div>

                <div style='<%= string.format("position: relative; left:146; top: 119; line-height: 56; width: 240; height: 56; color: #613f2e; font-size: 28; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_mat_bot_01.png"))%>'>学生人数</div>
                <div style='<%= string.format("position: relative; left:510; top: 119; line-height: 56; width: 240; height: 56; color: #613f2e; font-size: 28; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_mat_bot_01.png"))%>'>小组数</div>
    
                <div style='<%= string.format("position: relative; left:159; top: 189; line-height: 73; width: 214; height: 73; color: #ffffff; font-size: 36; font-family: Noto Sans S Chinese Regular; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_mat_bot_02.png"))%>'><%= #GetStudents() %></div>
                <div style='<%= string.format("position: relative; left:523; top: 189; line-height: 73; width: 214; height: 73; color: #ffffff; font-size: 36; font-family: Noto Sans S Chinese Regular; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_mat_bot_02.png"))%>'>
                    <input type="text" MoveViewWhenAttachWithIME="true" name="groupNum" onchange="OnGroupNumChange" value="" EmptyText='输入小组数' style="position: relative; left: 6; top: 18; width: 202; height: 36; font-size: 36; text-align: center; font-family: Noto Sans S Chinese Regular; background: #000000;"/>
                </div>
                
                <div onclick="OnClickGrouping" style='<%= string.format("position: relative; left:348; top: 307; width: 199; height: 67; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_btn.png"))%>'>
                    <div style='<%= string.format("position: relative; left:32; top: 14; width: 138; height: 32; background: url(%s);", GetIcon("live_lesson_team_btn_mat_team.png"))%>'></div>
                </div>
            </pe:if>

            <pe:if condition="<%= LiveLessonBasic.tipBoardFlag == 'roominfo' %>">
                <div style="position: relative; left: 0; top: 28; width: 895; color: #ffffff; font-size: 36;"><%= GetWorldInfo().roomName %></div>

                <div style='<%= string.format("position: relative; left:53; top: 122; line-height: 56; width: 240; height: 56; color: #613f2e; font-size: 28; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_mat_bot_01.png"))%>'>世界ID</div>
                <div style='<%= string.format("position: relative; left:316; top: 122; line-height: 56; width: 240; height: 56; color: #613f2e; font-size: 28; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_mat_bot_01.png"))%>'>当前分线</div>
                <div style='<%= string.format("position: relative; left:579; top: 122; line-height: 56; width: 240; height: 56; color: #613f2e; font-size: 28; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_mat_bot_01.png"))%>'>匹配码</div>
    
                <div style='<%= string.format("position: relative; left:66; top: 195; line-height: 73; width: 214; height: 73; color: #ffffff; font-size: 36; font-family: Noto Sans S Chinese Regular; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_mat_bot_02.png"))%>'><%= GetWorldInfo().worldId %></div>
                <div style='<%= string.format("position: relative; left:329; top: 195; line-height: 73; width: 214; height: 73; color: #ffffff; font-size: 36; font-family: Noto Sans S Chinese Regular; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_mat_bot_02.png"))%>'><%= GetWorldInfo().curBranch %></div>
                <div style='<%= string.format("position: relative; left:592; top: 195; line-height: 73; width: 214; height: 73; color: #ffffff; font-size: 36; font-family: Noto Sans S Chinese Regular; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_mat_bot_02.png"))%>'><%= GetWorldInfo().matchCode %></div>

                <div onclick="OnClickCopyMatchCode" style='<%= string.format("position: relative; left:326; top: 307; width: 199; height: 67; background: url(%s);", GetIcon("live_lesson_comm_roommes_team_btn.png"))%>'>
                    <div style='<%= string.format("position: relative; left:20; top: 15; width: 158; height: 31; background: url(%s);", GetIcon("live_lesson_roommes_btn_mat_number.png"))%>'></div>
                </div>

                <div onclick="OnClose" style='<%= string.format("position: relative; left:790; top: -14; width: 77; height: 123; background: url(%s);", GetIcon("live_lesson_comm_x.png"))%>'></div>
            </pe:if>

            <pe:if condition="<%= LiveLessonBasic.tipBoardFlag == 'confirm' %>">
                <div style="width:895;">
                </div>
                <div style="position: relative; left: 0; top: 28; width: 895; color: #ffffff; font-size: 36;">分组确认</div>
                <div style="position: relative; left: 80; top: 150; width: 895; color: #ffffff; font-size: 36; font-family: Noto Sans S Chinese Regular;">
                    <div style="float: left; height: 36; text-align: left;">确认要将&nbsp;&nbsp;</div>
                    <div style="float: left; height: 36; text-align: left;color: #ff0000;"><%= GetAddGroupTip().name %></div>
                    <div style="float: left; height: 36; text-align: left;">&nbsp;&nbsp;同学加入&nbsp;&nbsp;</div>
                    <div style="float: left; height: 36; text-align: left; color: #0000ff;"><%= GetAddGroupTip().group %></div>
                    <div style="float: left; height: 36; text-align: left;">&nbsp;&nbsp;组吗？</div>
                </div>
                <div onclick="OnClose" style='<%= string.format("position: relative; left:150; top: 270; width: 199; height: 67; color:#ffffff; line-height: 60; background: url(%s);", GetIcon("live_lesson_comm_btn_01.png"))%>'>取消</div>
                <div onclick="OnConfirm" style='<%= string.format("position: relative; left:536; top: 270; width: 199; height: 67; color:#ffffff; line-height: 60; background: url(%s);", GetIcon("live_lesson_comm_bot_02.png"))%>'>确认</div>
                
            </pe:if>
       </div>
    </div>
</pe:container>
</pe:mcml> 
</body>
</html>
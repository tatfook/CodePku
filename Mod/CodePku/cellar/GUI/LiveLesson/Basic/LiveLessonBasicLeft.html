<!-- "Mod/CodePku/cellar/Common/TouchMiniButtons/MainUIButtons_common.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>

<body>
<pe:mcml>
<script refresh="false" type="text/npl" src="LiveLessonBasic.lua"><![CDATA[
NPL.load("(gl)Mod/CodePku/cellar/GUI/LiveLesson/Basic/LiveLessonBasic.lua")
LiveLessonBasic = commonlib.gettable("Mod.CodePku.Common.LiveLessonBasic")

function GetIcon(index)
    return LiveLessonBasic:GetIconPath(index)
end

function GetToolIcon(index)
    if index == 1 then
        return GetIcon("live_lesson_expresstools_btn_mat_hands.png")
    elseif index == 2 then
        return GetIcon("live_lesson_expresstools_btn_mat_teleporting.png")
    elseif index == 3 then
        return GetIcon("live_lesson_expresstools_btn_mat_r.png")
    elseif index == 4 then
        return GetIcon("live_lesson_expresstools_btn_mat_x.png")
    end
end

function GetTeachTools()
    return LiveLessonBasic.teachTools
end

function GetStudentTools()
    return LiveLessonBasic.studentTools
end

function GetIentity()
    return LiveLessonBasic:GetIentity()
end

function OnClickTools(index)
    if GetIentity() then
        if index == 1 then
            LiveLessonBasic:ShowSubPage("broadcast")
        elseif index == 2 then
            LiveLessonBasic:RunGGSCommand("call")
        elseif index == 3 then
            LiveLessonBasic:RunGGSCommand("changesize")
        elseif index == 4 then
            LiveLessonBasic:ShowSubPage("award")
        elseif index == 5 then
            LiveLessonBasic:ShowSubPage("roominfo")
        end
    else
        if index == 2 then
            LiveLessonBasic:RunGGSCommand("toteacher")
        else
            LiveLessonBasic:QuickOperation(index)
        end
    end
end

function OnClose()
    Page:CloseWindow()
    LiveLessonBasic.windowLeft = nil
end

]]></script>
<style type="text/mcss">

</style>
<pe:container alignment="_lt" width="100%" height="100%">
    <div style="width: 210; height: 563; text-align: center; font-size: 24; font-family: zkklt; color: #845740;">
        <pe:if condition="<%= GetIentity() %>">
            <div style='<%= string.format("position: relative; top: 0; width: 210; height: 66; padding-left: 50; padding-top: 21; background: url(%s);",GetIcon("live_lesson_expresstools_btn_bot02.png")) %>'>教学工具栏</div>
            <div style='<%= string.format("position: relative; left: 50; top: 54; width: 141; height: 509; font-size: 30; background: url(%s);",GetIcon("live_lesson_expresstools_bot.png")) %>'>
                <pe:repeat DataSource="<%= GetTeachTools() %>">
                    <pe:repeatitem>
                        <pe:if condition="<%= bShow == true %>">
                            <div name="<%= index %>" onclick="OnClickTools" style='<%= string.format("margin-left: 5; margin-top: 5; line-height: 67; width: 130; height: 67; background: url(%s);",GetIcon("live_lesson_expresstools_btnbot.png")) %>'><%= name %></div>
                        </pe:if>                  
                    </pe:repeatitem>
                </pe:repeat>
            </div>
        </pe:if>

        <pe:if condition="<%= GetIentity() == false %>">
            <div style='<%= string.format("position: relative; left: 24; top: -1; width: 160; height: 58; padding-left: 33; padding-top: 21; background: url(%s);",GetIcon("live_lesson_expresstools_btn_bot.png")) %>'>快捷操作</div>
            <div style='<%= string.format("position: relative; left: 41; top: 55; width: 141; height: 509; background: url(%s);",GetIcon("live_lesson_expresstools_bot.png")) %>'>
                <pe:repeat DataSource="<%= GetStudentTools() %>">
                    <pe:repeatitem>
                        <pe:if condition="<%= bShow == true %>">
                            <div name="<%= index %>" onclick="OnClickTools" style='<%= string.format("margin-left: 5; margin-top: 5; line-height: 67; width: 130; height: 67; background: url(%s);",GetIcon("live_lesson_expresstools_btnbot.png")) %>'>
                                <div style='<%= string.format("position: relative; left: 7; top: 15; width: 111; height: 36; background: url(%s);",GetToolIcon(index)) %>'></div>
                            </div>
                        </pe:if>                  
                    </pe:repeatitem>
                </pe:repeat>
            </div>
        </pe:if>
    </div>
</pe:container>
</pe:mcml> 
</body>
</html>
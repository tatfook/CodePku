<!-- "script/apps/Aries/Creator/Game/Areas/EscFramePage.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>个人中心</title>
</head>
<body>
    <pe:mcml>
<script refresh="false" type="text/npl" src="UserInfo.lua"><![CDATA[
UserInfoPage = NPL.load("(gl)Mod/CodePku/cellar/GUI/UserInfo.lua");

NPL.load("(gl)Mod/CodePku/cellar/GUI/Profile/EditShare.lua");
NPL.load("(gl)Mod/CodePku/cellar/GUI/Profile/EditName.lua");
SharePage = commonlib.gettable("Mod.CodePku.SharePage")
EditSharePage = commonlib.gettable("Mod.CodePku.EditSharePage")
EditNamePage = commonlib.gettable("Mod.CodePku.EditNamePage")
SubjectPage = commonlib.gettable("Mod.CodePku.SubjectPage")

ProfilePng = "codepku/image/textures/profile_32bits.png";
local name = UserInfoPage.name

UserInfoPage.mainPage = Page

function ClosePage()
    UserInfoPage.categoryIndex = 1
    Page:CloseWindow();
end

function OnConfirm()
    GameLogic.RunCommand("/goto,home")
end

function Choose(index)
    if index ~=  UserInfoPage.tab_ds_index then
        UserInfoPage.tab_ds_index = tonumber(index);
        UserInfoPage.tab_ds_name = name;
        if (UserInfoPage.isSelf) then
            UserInfoPage.tab_ds_name = UserInfoPage.tab_ds_self[index].name;
        else
            UserInfoPage.tab_ds_name = UserInfoPage.tab_ds_other[index].name;
        end
        Page:Refresh(0.01);
    end
end

function Undefinde()
    GameLogic.RunCommand("/tip -duration 1500 功能正在开发中")
end

function GetTabButtons()
    if (UserInfoPage.isSelf) then
        return UserInfoPage.tab_ds_self;
    else
        return UserInfoPage.tab_ds_other;
    end
end

function GetTabDSIndex()
    local index = UserInfoPage.tab_ds_index;
    if (index) then
        return index;
    end
end

function GetTabDSName()
    local name = UserInfoPage.tab_ds_name;
    if (name) then
        return name;
    end
end

function GetIdentity()
    return UserInfoPage.isSelf;
end
]]>   
</script>
<style type="text/mcss">
</style>
<pe:container alignment="_lt" width="1920" height="1080">
    <div style='<%=format("width:1920;height:1080;background:url(codepku/image/textures/background/main.png);font-family:Noto Sans S Chinese Regular;")%>' >
        <div height="100%" style="position:absolute;top:0;left:0;bottom:0;width:230px;background-color:#94E3FE"></div>
        <div style="text-align:center;">
            <input type="button" name="close" onclick="ClosePage" style="float:left;width:208px;height:127px;background:url(codepku/image/textures/common_32bits.png#251 49 208 127);"/>
            <div style="position:absolute;left:132px;top:0;width:441px;height:102px;background:url(codepku/image/textures/common_32bits.png#463 63 441 100);padding-top:4px;font-family:PuHuiTi-Bold;font-size:70px;color:#d85d0b;">个人中心</div>
            <pe:if condition="<%=GetIdentity()%>">
                <iframe name="money" src="Money.html" style="position:absolute;top:0;"></iframe>
            </pe:if>
        </div>
        <div style="font-size:45px;font-weight:bold;font-family:Noto Sans S Chinese Regular;text-align:center;position:relative;">
            <pe:repeat DataSource="<%=GetTabButtons()%>">
                <pe:repeatitem>
                    <pe:if condition='<%=GetTabDSIndex() == Eval("index") %>'>
                        <input type="button" name='<%= Eval("index")%>' value='<%=Eval("text")%>' style='width:261px;height:96px;margin-left:27px;padding-bottom:20px;background:url(codepku/image/textures/common_32bits.png#1648 196 261 96);' onclick="Choose" />
                    </pe:if>
                    <pe:if condition='<%=GetTabDSIndex() ~= Eval("index") %>'>
                        <input type="button" name='<%= Eval("index")%>' value='<%=Eval("text")%>' style='width:244px;height:94px;background:url(codepku/image/textures/common_32bits.png#1294 66  134 94: 36 30 30 32);' onclick="Choose" />
                    </pe:if>
                </pe:repeatitem>
            </pe:repeat>
        </div>
        <!-- 角色 -->
        <div style='<%=format("position:relative;margin-left:235px;margin-top:298px;width:727px;height:653px;background:url(%s#410 490 750 653);", Eval("ProfilePng")) %>'>
            <!-- 玩仔 -->
            <div style='<%=format("margin-left:230px;margin-top:-100px;width:345px;height:600px;background:url(%s#66 531 345 600);", Eval("ProfilePng")) %>'>
            </div>
            <!-- <pe:mc_player /> 暂不支持mcml2, 待paracraft老师开发后替换，先显示玩仔 -->
            <!-- <div style="width:100px;height:150px;" >
                <div style="position:relative;margin-left:-90px;margin-top:-115px;width:130px;height:120px;" >
                    <pe:mc_player name="MyPlayer" miniscenegraphname="AvatarMyselfTabCharacter" style="width:320px;height:320px;" IsInteractive="false" IsActiveRendering="true"/>
                </div>
            </div> -->
            <!-- hide for now -->
            <!-- <div style='<%=format("position:absolute;margin-left:48px;top:-148px;padding:18px;font-size:36px;color:#ffffff;width:490px;height:180px;background:url(%s#1275 451 219 125:204 24 13 68);", Eval("ProfilePng")) %>'>
                心情寄语
            </div> -->
        </div>
        <!-- <div style="position:relative;width:275;height:97;margin-top:960;font-size:18;base-font-size:40;background:url(codepku/image/textures/userinfo/options/shezhi.png)"onclick="Undefinde"></div> -->
        <!-- 首页 -->
        <pe:if condition='<%=GetTabDSName() == "Home"%>'>
            <iframe name="HomeFrame" src="Mod/CodePku/cellar/GUI/Profile/HomeFrame.html" style="position:absolute;left:407px;"></iframe>
        </pe:if>
        <!-- 属性 -->
        <pe:if condition='<%=GetTabDSName() == "Profile"%>'>
            <iframe name="ProfileFrame" src="Mod/CodePku/cellar/GUI/Profile/ProfileFrame.html" style="margin-left:1017px;"></iframe>
        </pe:if>
        <!-- 背包 -->
        <pe:if condition='<%=GetTabDSName() == "Backpack"%>'>
            <iframe name="BackpackFrame" src="Mod/CodePku/cellar/GUI/Profile/BackpackFrame.html" style="margin-left:1017px;"></iframe>
        </pe:if>
    </div>
</pe:container>
<!-- <pe:container alignment="_ct" width="1158" height="588" style="position:absolute;margin-left:200px;margin-top:100px;background-color: #1a3a2e55;"> -->
 
<!-- </pe:container> -->
</pe:mcml>
</body>
</html>
 
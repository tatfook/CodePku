<!-- "Mod/CodePku/cellar/Gui/FriendUI/MyFriend.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>

<body>
<pe:mcml>
<script refresh="false" type="text/npl" src="FriendUI.lua">
<![CDATA[
local FriendUI = commonlib.gettable("Mod.CodePku.GUI.FriendUI")
cur_index = 1
menu = {
    {index = 1, text = "my_friend"},
    {index = 2, text = "recent_player"},
    {index = 3, text = "black_list"},
}

function ClosePage()
    Page:CloseWindow();
end

function AddFriend()
    Page:Refresh(0);
end

function FriendApply()
    Page:Refresh(0);
end


function ChangePage(index)
    FriendUI:ShowPage(index)
end


function ClickChat(uid)
    echo("chat")
end

function ClickDelete(uid)
    echo("delete")
end

FriendData = {
    {id=11,head="1.png", name="111111111", level=1, gender = "m", online=true, last_time = ''},
    {id=22,head="2.png", name="sdfsdf", level=3, gender = "f", online=true, last_time = ''},
    {id=35,head="1.png", name="222", level=5, gender = "m", online=false, last_time = '2020-7-20 12:00'},
    {id=47,head="2.png", name="rrr", level=4, gender = "f", online=false, last_time = '2020-7-20 17:00'},
    {id=56,head="1.png", name="9999", level=2, gender = "m", online=false, last_time = '2020-7-17 12:00'},
    {id=67,head="1.png", name="9999", level=2, gender = "m", online=false, last_time = '2020-7-17 12:00'},
    {id=72,head="1.png", name="9999", level=2, gender = "m", online=false, last_time = '2020-7-17 12:00'},
    {id=85,head="1.png", name="9999", level=2, gender = "m", online=false, last_time = '2020-7-17 12:00'},
    {id=90,head="1.png", name="9999", level=2, gender = "m", online=false, last_time = '2020-7-17 12:00'},
    {id=104,head="1.png", name="9999", level=2, gender = "m", online=false, last_time = '2020-7-17 12:00'}
}

function getFriendData()
    return FriendData
end

function AddFriend()
    FriendUI:ShowPopup(1)
end

function FriendApply()
    FriendUI:ShowPopup(3)
end

function ClickDelete()
    FriendUI:ShowPopup(4)
end

]]>
</script>
<style type="text/mcss">

</style>
<pe:container alignment="_lt" width="1920" height="1080" style="background: url(codepku/image/textures/friend/main/bg.png)">
    <div style="position:relative; width: 164;height: 83;left:170;top:20;
    background: url(codepku/image/textures/friend/main/title.png);">
    </div>
    <div style="position:relative; margin-left: 40;width: 100;height: 60;margin-top: 35;
    background: url(codepku/image/textures/friend/main/return.png);" onclick="ClosePage"></div>

    <div style="position:relative; margin-left: 450;margin-top: 140;width: 225;height: 70;
    background: url(codepku/image/textures/friend/main/add_friend.png);" onclick="AddFriend"></div>
    <div style="position:relative; margin-left: 1600;margin-top: 140;width: 225;height: 70;
    background: url(codepku/image/textures/friend/main/friend_apply.png);" onclick="FriendApply"></div>

    <!-- left bar menu -->
    <pe:repeat DataSource="<%=menu%>" style="position:relative;top:235">
        <pe:repeatitem>
            <pe:if condition='<%=Eval("index") ~= cur_index%>'>
            <div style='<%=format("width:367; height:120;left: 0;margin-top:30;background: url(codepku/image/textures/friend/menu/%s.png);",
            Eval("text"))%>' name='<%=Eval("index")%>' onclick="ChangePage"></div>
            </pe:if>
            <pe:if condition='<%=Eval("index") == cur_index%>'>
            <div style='<%=format("width:429; height:150;left: 0;margin-top:30;background: url(codepku/image/textures/friend/menu/%s.png);",
            Eval("text").."_active")%>'></div>
            </pe:if>
        </pe:repeatitem>
    </pe:repeat>


    <pe:gridview name="MyFriend" style="position:relative;margin-top:270;margin-left: 450;
    height:700;width: 1400;background-color: #ff00ff50;" DataSource='<%=FriendData %>' CellPadding="10" ItemsPerLine="1" AllowPaging="false" RememberScrollPos="true" RememberLastPage="true" 
    VerticalScrollBarStep="36" VerticalScrollBarOffsetX="8">
    <Columns>
    <div style="width: 1200;height: 160;">
        <div style="position:relative;width:1146;height:130;top:15;left:15;background: url(codepku/image/textures/friend/item/bg.png);"></div>
        <div style="position:relative;width:160;height:160;background: url(codepku/image/textures/friend/item/head.png);"></div>
        <div style='<%=format("position:relative;width:100;height:100;left: 20;top: 20;background: url(codepku/image/textures/friend/head/%s);", Eval("head"))%>'></div>
        <div style="position:relative;width:200;height:40;left:200;top:20;font-size: 40;color: #FFA500;"><%=Eval("name")%></div>
        <div style="position:relative;width:200;height:40;left:200;top:100;font-size: 30;color: #FFA500;">ID: <%=Eval("id")%></div>
        <div style='<%=format("position:relative;width:37;height:37;left:400;top:25;background: url(codepku/image/textures/friend/item/%s.png);", Eval("gender"))%>'></div>
        
        <div style="position:relative;width:100;height:60;top:50;left:850;background: url(codepku/image/textures/friend/my_friend/delete.png);" onclick="ClickDelete"></div>
        <div style="position:relative;width:100;height:60;top:50;left:1000;background: url(codepku/image/textures/friend/my_friend/chat.png);" onclick="ClickChat"></div>
    </div>
    </Columns>
    </pe:gridview>


</pe:container>
</pe:mcml>
</body>

</html>
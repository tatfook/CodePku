<!-- "Mod/CodePku/cellar/Common/TouchMiniButtons/MainUIButtons_function.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>

<body>
<pe:mcml>
<script refresh="false" type="text/npl" src="MainSceneUIButtons.lua"><![CDATA[
local MainUIButtons = NPL.load("(gl)Mod/CodePku/cellar/Common/TouchMiniButtons/Main.lua");

is_open = MainUIButtons.open_function
Rb_buttons = MainUIButtons.rb_buttons
Rb_width = MainUIButtons.get_rb_width();

NPL.load("(gl)Mod/CodePku/cellar/GUI/rank/RankPage.lua")
local UserInfoPage = NPL.load("(gl)Mod/CodePku/cellar/GUI/UserInfo.lua");
UserInfoPage.OnInit();

RankPage = commonlib.gettable("Mod.CodePku.RankPage");
FriendUI = NPL.load("(gl)Mod/CodePku/cellar/GUI/Friend/FriendUI.lua");

function ClickClose() 
    Page:CloseWindow()
    MainUIButtons.show_function_ui("close")
end

function ClickOpen() 
    Page:CloseWindow()
    MainUIButtons.show_function_ui()
end

function ClickFunctionButton()
    GameLogic.AddBBS("CodeGlobals", L"功能开发中", 3000, "#ff0000");
end

function ClickChooseFun(name)
    if (name == "ClickUserInfo") then 
        UserInfoPage:ShowPage()
    elseif(name == "ClickBag") then 
        UserInfoPage:ShowPage(5)
    elseif(name == "ClickFriend") then 
        FriendUI:ShowPage(1)
    elseif(name == "ClickRank") then 
        RankPage:ShowPage(1)
    else
        GameLogic.AddBBS("CodeGlobals", L"功能开发中", 3000, "#ff0000");
    end
end

]]></script>
<style type="text/mcss">

</style>


<pe:container alignment="_rb" width="100%" height="100%">
    <pe:if condition='<%=is_open==false%>'>
        <div style="position: relative; width: 82; height: 178; left: 0; transform: rotate(180deg); transform-origin: 41px 89px; background: url(codepku/image/textures/main_ui/main.png#915 14 82 178);" onclick="ClickOpen"></div>
    </pe:if>
    <pe:if condition='<%= is_open %>'>
        <div style="position: relative; width: 82; height: 178; left: 2; background: url(codepku/image/textures/main_ui/main.png#915 14 82 178);" onclick="ClickClose"></div>
     
        <div style="<%=format('position: relative; width: %d; height: 178; left: 82; background: url(codepku/image/textures/main_ui/main.png#46 495 200 54:20 20 20 20);', Rb_width)%>" ></div>
            <pe:repeat DataSource="<%=Rb_buttons%>" style="padding-left: 82;">
                <pe:repeatitem style="float:left;">
                    <div style="<%=format('margin-left:45;width:%d;height:%d;top: %d;background: url(%s);',Eval('width'),Eval('height'),Eval('top'),Eval('url'))%>" name="<%=Eval('name')%>" onclick="ClickChooseFun"></div>
                </pe:repeatitem>
            </pe:repeat>
        </div>
    </pe:if>
</pe:container>
</pe:mcml> 
</body>
</html>
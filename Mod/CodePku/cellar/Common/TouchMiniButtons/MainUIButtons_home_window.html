<!-- 
Author: zouren
Date: 2020-09-14 17:13:32
Des:
Path:"Mod/CodePku/cellar/Common/TouchMiniButtons/MainUIButtons_home_window.html"
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>
<body>
<pe:mcml>
<script refresh="false" type="text/npl">
<![CDATA[
NPL.load("(gl)Mod/CodePku/cellar/GUI/Home/HomeManage.lua");
local HomeManage = commonlib.gettable("Mod.CodePku.Common.HomeManage")
local Researchers = NPL.load("(gl)Mod/CodePku/cellar/GUI/Researchers/Researchers.lua");

function StartEditWorld()
    LOG.std(nil, "MainUIButtons_home_window", "StartEditWorldBtn", "clicked")
    HomeManage:ChangeGameMode()
    Page:Refresh()
end

function SaveAndExitEditWorld()
    local isVisitor = commonlib.getfield("System.User.isVisitor")
    if isVisitor then
        local VisitorLimit = NPL.load("(gl)Mod/CodePku/cellar/GUI/AccountUp/VisitorLimit.lua");
        local params = {
            title = "权限提醒",
            content = "你还没注册哦，等下搭建完了保存不了哦！快去注册来和玩仔一决高下吧！",
        }
        VisitorLimit:CheckStatus(params);
        return
    end
    LOG.std(nil, "MainUIButtons_home_window", "SaveAndExitEditWorldBtn", "clicked")
    HomeManage:SaveHome()
    Page:Refresh()
end

function BuildingBoard()
    local url = Mod.CodePku.BasicConfigTable.links.home_world_announcement or "https://none.h5.xeknow.com/st/5XKdbYHy5"
    Researchers:ShowPage(1, url)
end

]]></script>
<style type="text/mcss">

</style>
<pe:container alignment="_lt" width="335" height="355" >
    <!-- 攻略秘籍 -->
    <div onclick="BuildingBoard" style="position: relative; left: 180;top: 30;width: 169; height: 158;background: url(codepku/image/textures/enter_world_btn/enter_world_btn.png#185 536 169 158);"></div>
    <pe:if condition='<%=GameLogic.GameMode:IsEditor()==false%>'>
        <div name="StartEditWorldBtn" onclick="StartEditWorld" style="position: relative; left: 200;top: 220;width: 135; height: 134; background: url(codepku/image/textures/enter_world_btn/enter_world_btn.png#96 330 134 134);"></div>
    </pe:if>
    <pe:if condition='<%=GameLogic.GameMode:IsEditor()==true%>'>
        <div name="SaveAndExitEditWorldBtn" onclick="SaveAndExitEditWorld" style="position: relative; left: 200;top: 220;width: 135; height: 134;background: url(codepku/image/textures/enter_world_btn/enter_world_btn.png#312 330 134 134);"></div>
    </pe:if>
</pe:container>


</pe:mcml>
</body>
</html>
